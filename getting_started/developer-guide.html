


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Developer Guide - Flux RESTful API</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.359ec555e2989f00f.min.css?v=379f618b" />
        <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=84ccdeda" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    


<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<!-- Social: Facebook / Open Graph -->
<title>Flux RESTful API in Python</title>
<link rel="canonical" href="https://flux-framework.github.io/flux-restful-api/"/>
<meta property="og:type" content="website">

<meta property="og:url" content="https://flux-framework.github.io/flux-restful-api/">
<meta property="og:title" content="Flux RESTful API">
<meta property="og:image" content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png">
<meta property="og:description" content="Flux RESTful API in Python">
<meta property="og:site_name" content="Flux RESTful API">
<meta property="og:locale" content="en_US">

<!-- Social: Twitter -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@FluxFramework">
<meta name="twitter:title" content="Flux Framework">
<meta name="twitter:description" content="Flux RESTFul API in Python">
<meta name="twitter:image" content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png">

<!-- Social: Google+ / Schema.org  -->
<meta itemprop="name" content="Flux RESTful API">
<meta itemprop="description" content="Flux RESTFul API in Python">
<meta itemprop="image" content="https://raw.githubusercontent.com/flux-framework/flux-restful-api/main/docs/images/logo.png">
<script type="application/ld+json">
  {"@type":"WebSite","headline":"Flux RESTful API","url":"https://flux-framework.github.io/flux-restful-api","description":"Flux RESTful API in Python","name":"Flux RESTful API","@context":"https://schema.org"}
</script>

<style>
.material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 400,
  'GRAD' 0,
  'opsz' 48
}
.sphx-glr-script-out .highlight pre {
  background-color: #def0ff !important;
}
  </style>




  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Flux RESTful API" class="md-header__button md-logo" aria-label="Flux RESTful API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flux RESTful API
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Developer Guide
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/flux-framework/flux-restful-api/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Flux RESTFul API
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="index.html" class="md-tabs__link md-tabs__link--active">
      <span class="md-ellipsis">Getting Started</span>
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../source/modules.html" class="md-tabs__link">
      <span class="md-ellipsis">API</span>
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Flux RESTful API" class="md-nav__button md-logo" aria-label="Flux RESTful API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    Flux RESTful API
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/flux-framework/flux-restful-api/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Flux RESTFul API
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_1">
          <span class="md-ellipsis">Getting Started</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Getting Started</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="index.html"><span title="/getting_started/index.md (reference label)" class="md-ellipsis">Documentation</span></a>
          
            <label for="__nav_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          <span title="/getting_started/index.md (reference label)" class="md-ellipsis">Documentation</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="user-guide.html" class="md-nav__link">
        <span title="/getting_started/user-guide.md (reference label)" class="md-ellipsis">User Guide</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/getting_started/developer-guide.md (reference label)" class="md-ellipsis">Developer Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/getting_started/developer-guide.md (reference label)" class="md-ellipsis">Developer Guide</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#devcontainer" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#devcontainer (reference label)" class="md-ellipsis">Devcontainer</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#docker (reference label)" class="md-ellipsis">Docker</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#local (reference label)" class="md-ellipsis">Local</span>
  </a>
  
    <nav class="md-nav" aria-label="Local">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#install (reference label)" class="md-ellipsis">1.<wbr> Install</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-service" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#start-service (reference label)" class="md-ellipsis">2.<wbr> Start Service</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#authentication (reference label)" class="md-ellipsis">3.<wbr> Authentication</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactions" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#interactions (reference label)" class="md-ellipsis">Interactions</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#environment (reference label)" class="md-ellipsis">Environment</span>
  </a>
  
    <nav class="md-nav" aria-label="Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flux-option-flags" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#flux-option-flags (reference label)" class="md-ellipsis">Flux Option Flags</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-linting" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#code-linting (reference label)" class="md-ellipsis">Code Linting</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#database (reference label)" class="md-ellipsis">Database</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#documentation (reference label)" class="md-ellipsis">Documentation</span>
  </a>
  
    <nav class="md-nav" aria-label="Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-dependencies-and-build" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#install-dependencies-and-build (reference label)" class="md-ellipsis">Install Dependencies and Build</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-documentation" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#preview-documentation (reference label)" class="md-ellipsis">Preview Documentation</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-tests" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#run-tests (reference label)" class="md-ellipsis">Run Tests</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docstrings" class="md-nav__link">
    <span title="/getting_started/developer-guide.md#docstrings (reference label)" class="md-ellipsis">Docstrings</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="interface.html" class="md-nav__link">
        <span title="/getting_started/interface.md (reference label)" class="md-ellipsis">Interface</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="api.html" class="md-nav__link">
        <span title="/getting_started/api.md (reference label)" class="md-ellipsis">API</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/index.html" class="md-nav__link">
        <span title="/tutorials/index.md (reference label)" class="md-ellipsis">Tutorials</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing.html" class="md-nav__link">
        <span title="/contributing.md (reference label)" class="md-ellipsis">Contributing</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/license.html" class="md-nav__link">
        <span title="/about/license.md (reference label)" class="md-ellipsis">License</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2">
          <span class="md-ellipsis">API</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">API</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../source/modules.html" class="md-nav__link">
        <span title="/source/modules.rst (reference label)" class="md-ellipsis">app</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/flux-framework/flux-restful-api/blob/main/docs/getting_started/developer-guide.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>

<h1 id="developer-guide">Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this heading">¶</a></h1>
<p>This developer guide includes complete instructions for setting up a developer
environment.</p>
<h2 id="devcontainer">Devcontainer<a class="headerlink" href="#devcontainer" title="Permalink to this heading">¶</a></h2>
<p>If you use VSCode a  <a class="reference external" href="https://github.com/flux-framework/flux-restful-api/tree/main/.devcontainer">.devcontainer</a>
recipe is available that makes it easy to spin up an environment just by way of opening the repository in VSCode! After doing
this, continue to <a class="reference internal" href="#local"><span class="std std-ref">Local</span></a> below.</p>
<h2 id="docker">Docker<a class="headerlink" href="#docker" title="Permalink to this heading">¶</a></h2>
<p>You can use the <a class="reference external" href="https://github.com/flux-framework/flux-restful-api/pkgs/container/flux-restful-api">demo container</a>,
either as provided or build on your own, to
run the server and interact with it. To optionally build the container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>ghcr.io/flux-framework/flux-restful-api<span class="w"> </span>.
</code></pre></div>
</div>
<p>To build ensuring there is authentication (this will use user and token defaults)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>--build-arg<span class="w"> </span><span class="nv">use_auth</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>-t<span class="w"> </span>ghcr.io/flux-framework/flux-restful-api<span class="w"> </span>.
</code></pre></div>
</div>
<p>Or define extra builds args <code class="docutils literal notranslate"><span class="pre">--build-arg</span> <span class="pre">user=fluxuser</span> <span class="pre">--build-arg</span> <span class="pre">token=12345</span></code> to customize the username and token!
Build arguments supported are:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>user</td>
<td>Username for basic auth</td>
<td>unset</td>
</tr>
<tr>
<td>token</td>
<td>Token password for basic auth</td>
<td>unset</td>
</tr>
<tr>
<td>use_auth</td>
<td>Turn on authentication</td>
<td>unset (meaning false)</td>
</tr>
<tr>
<td>port</td>
<td>Port to run service on (and expose)</td>
<td>5000</td>
</tr>
<tr>
<td>host</td>
<td>Host to run service on (you probably shouldn't change this)</td>
<td>0.0.0.0</td>
</tr>
<tr>
<td>workers</td>
<td>Number of workers to run uvicorn with (required for Flux jobs with &gt;1 process)</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>And run it ensuring you expose port 5000. The container should show you if you’ve
correctly provided auth (or not):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>ghcr.io/flux-framework/flux-restful-api
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">🍓 Require auth: True</span>
<span class="go">🍓  Server mode: single-user</span>
<span class="go">🍓   Secret key ***********</span>
<span class="go">🍓    Flux user: ********</span>
<span class="go">🍓   Flux token: *****</span>
<span class="go">collected 5 items</span>
<span class="go">INFO:     Started server process [72]</span>
<span class="go">INFO:     Waiting for application startup.</span>
<span class="go">INFO:     Application startup complete.</span>
<span class="go">INFO:     Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)</span>
</code></pre></div>
</div>
<p>Or run detached and then stop later:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>flux-restful<span class="w"> </span>-d<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>ghcr.io/flux-framework/flux-restful-api
$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span>flux-restful
</code></pre></div>
</div>
<p>Finally, if you want to install a custom branch (and/or repository) of the RESTFul API, we provide
an environment variable to do this. E.g., this makes it easy to test a custom branch in CI without
needing to push a container to a registry. Here is how to specify a branch (and default to flux-framework/flux-restful-api)
or your own repository base:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--env<span class="w"> </span><span class="nv">INSTALL_BRANCH</span><span class="o">=</span>add/feature<span class="w"> </span>--env<span class="w"> </span><span class="nv">INSTALL_REPO</span><span class="o">=</span>user/flux-restful-api<span class="w"> </span>-d<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>ghcr.io/flux-framework/flux-restful-api
</code></pre></div>
</div>
<h2 id="local">Local<a class="headerlink" href="#local" title="Permalink to this heading">¶</a></h2>
<p>You can use this setup locally (if you have flux and Python available) or within the Dev Container
in a VSCode environment.</p>
<h3 id="install">1. Install<a class="headerlink" href="#install" title="Permalink to this heading">¶</a></h3>
<p>After cloning the repository, install dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>env
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>env/bin/activate
</code></pre></div>
</div>
<p>Install requirements (note that you also need Flux Python available, which isn’t in these requirements as you cannot install from pip).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>
</div>
<p>Note that there is a bug with fastapi so we need to do some installs outside of the requirements.txt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span><span class="nv">pydantic</span><span class="o">==</span><span class="m">1</span>.10.11
pip<span class="w"> </span>install<span class="w"> </span>pydantic-settings
</code></pre></div>
</div>
<h3 id="start-service">2. Start Service<a class="headerlink" href="#start-service" title="Permalink to this heading">¶</a></h3>
<p>There are two ways to start the app! You can either have it be the entry for flux start:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="gp">$ </span>flux<span class="w"> </span>start<span class="w"> </span>uvicorn<span class="w"> </span>app.main:app<span class="w"> </span>--host<span class="o">=</span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="o">=</span><span class="m">5000</span>
</code></pre></div>
</div>
<p>Or do it separately (two commands):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>flux<span class="w"> </span>start<span class="w"> </span>--test-size<span class="o">=</span><span class="m">4</span>
uvicorn<span class="w"> </span>app.main:app<span class="w"> </span>--host<span class="o">=</span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="o">=</span><span class="m">5000</span>
</code></pre></div>
</div>
<p>For the latter, you can also use the Makefile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>make
</code></pre></div>
</div>
<p>If you are developing, you must do the second approach as the server won’t live-update
with the first. If you want to start flux running as a separate process:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>-u<span class="w"> </span>flux<span class="w"> </span>/usr/bin/flux<span class="w"> </span>broker<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--config-path<span class="o">=</span>/etc/flux/system/conf.d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Scron.directory<span class="o">=</span>/etc/flux/system/cron.d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Srundir<span class="o">=</span>/run/flux<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Sstatedir<span class="o">=</span><span class="si">${</span><span class="nv">STATE_DIRECTORY</span><span class="k">:-</span><span class="p">/var/lib/flux</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Slocal-uri<span class="o">=</span>local:///run/flux/local<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Slog-stderr-level<span class="o">=</span><span class="m">6</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Slog-stderr-mode<span class="o">=</span><span class="nb">local</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Sbroker.rc2_none<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Sbroker.quorum<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Sbroker.quorum-timeout<span class="o">=</span>none<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Sbroker.exit-norestart<span class="o">=</span><span class="m">42</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-Scontent.restore<span class="o">=</span>auto<span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>
</div>
<p>And then we need munge to be started (this should be done by the devcontainer):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>service<span class="w"> </span>munge<span class="w"> </span>start
</code></pre></div>
</div>
<p>And export any authentication envars you need before running make.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_URI</span><span class="o">=</span>local:///run/flux/local
$<span class="w"> </span>sudo<span class="w"> </span>-E<span class="w"> </span>make
</code></pre></div>
</div>
<h3 id="authentication">3. Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">¶</a></h3>
<p>If you want to require authentication for the user, export the user and token and
a variable that tells the server to use auth:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_USER</span><span class="o">=</span><span class="nv">$USER</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_TOKEN</span><span class="o">=</span><span class="m">123456</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_REQUIRE_AUTH</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div>
</div>
<p>As an alternative, you can enable PAM authentication to use user accounts on the running server:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_ENABLE_PAM</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_REQUIRE_AUTH</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div>
</div>
<p>Authentication must be enabled for PAM to work too - you can’t just enable the first. For the latter (multi-user)
flux needs to be started first (e.g., the instance or broker) and then the actual server needs to be started by root.</p>
<h2 id="interactions">Interactions<a class="headerlink" href="#interactions" title="Permalink to this heading">¶</a></h2>
<p>Regardless of how you install, you can open your host to <a class="reference external" href="http://127.0.0.1:5000">http://127.0.0.1:5000</a>
to see the very simple interface! This currently has API documentation (<a class="reference external" href="https://fastapi.tiangolo.com/advanced/extending-openapi/">openapi</a>)
and we will soon add a table of jobs.</p>
<p><img alt="img/portal.png" src="../_images/portal.png" /></p>
<p>Once you have the server running, you can use an example client to interact
with the server. See our <a class="reference external" href="https://flux-framework.org/flux-restful-api/getting_started/user-guide.html">User Guide</a> for these instructions.</p>
<h2 id="environment">Environment<a class="headerlink" href="#environment" title="Permalink to this heading">¶</a></h2>
<p>Wherever you run the app, you can control variables (settings) via the environment.
The following variables are available (with their defaults):</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLUX_REQUIRE_AUTH</td>
<td>The server should require basic auth for API and authenticated endpoints</td>
<td>False (unset)</td>
</tr>
<tr>
<td>FLUX_TOKEN</td>
<td>The token password to require for Basic Auth (if <code>FLUX_REQUIRE_AUTH</code> is set)</td>
<td>unset</td>
</tr>
<tr>
<td>FLUX_USER</td>
<td>The username to require for Basic Auth (if <code>FLUX_REQUIRE_AUTH</code> is set)</td>
<td>unset</td>
</tr>
<tr>
<td>FLUX_HAS_GPU</td>
<td>GPUs are available for the user to request</td>
<td>unset</td>
</tr>
<tr>
<td>FLUX_NUMBER_NODES</td>
<td>The number of nodes available (exposed) in the cluster</td>
<td>1</td>
</tr>
<tr>
<td>FLUX_OPTION_FLAGS</td>
<td>Option flags to give to flux, in the same format you'd give on the command line</td>
<td>unset</td>
</tr>
<tr>
<td>FLUX_SECRET_KEY</td>
<td>secret key to be shared between user and server (required)</td>
<td>unset</td>
</tr>
<tr>
<td>FLUX_ACCESS_TOKEN_EXPIRES_MINUTES</td>
<td>number of minutes to expire an access token</td>
<td>600</td>
</tr>
<tr>
<td>FLUX_RESTFUL_HOST</td>
<td>Host for command line client</td>
<td>http://127.0.0.1:5000</td>
</tr>
</tbody>
</table>
<h3 id="flux-option-flags">Flux Option Flags<a class="headerlink" href="#flux-option-flags" title="Permalink to this heading">¶</a></h3>
<p>Option flags can be set server-wide or on the fly by a user in the interface
(or restful API). An option set by a user will over-ride the server setting.
An example setting a server-level option flags is below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_OPTION_FLAGS</span><span class="o">=</span><span class="s2">&quot;-ompi=openmpi@5&quot;</span>
</code></pre></div>
</div>
<p>This would be translated to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">fluxjob</span> <span class="o">=</span> <span class="n">flux</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">JobspecV1</span><span class="o">.</span><span class="n">from_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">fluxjob</span><span class="o">.</span><span class="n">setattr_shell_option</span><span class="p">(</span><span class="s2">&quot;mpi&quot;</span><span class="p">,</span> <span class="s2">&quot;openmpi@5&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<p>And note that you can easily set more than one:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_OPTION_FLAGS</span><span class="o">=</span><span class="s2">&quot;-ompi=openmpi@5 -okey=value&quot;</span>
</code></pre></div>
</div>
<h2 id="code-linting">Code Linting<a class="headerlink" href="#code-linting" title="Permalink to this heading">¶</a></h2>
<p>We use <a class="reference external" href="https://pre-commit.com/">pre-commit</a> to handle code linting and formatting, including:</p>
<ul class="simple">
<li><p>black</p></li>
<li><p>isort</p></li>
<li><p>flake8</p></li>
</ul>
<p>Our setup also handles line endings and ensuring that you don’t add large files!</p>
<p>Using the tools is easy. After preparing your local environment,
you can use pre-commit as follows. Here is a manual run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>pre-commit<span class="w"> </span>run<span class="w"> </span>--all-files
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">check for added large files..............................................Passed</span>
<span class="go">check for case conflicts.................................................Passed</span>
<span class="go">check docstring is first.................................................Passed</span>
<span class="go">fix end of files.........................................................Passed</span>
<span class="go">trim trailing whitespace.................................................Passed</span>
<span class="go">mixed line ending........................................................Passed</span>
<span class="go">black....................................................................Passed</span>
<span class="go">isort....................................................................Passed</span>
<span class="go">flake8...................................................................Passed</span>
</code></pre></div>
</div>
<p>And to install as a hook (recommended so you never commit with linting flaws!)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>pre-commit<span class="w"> </span>install
</code></pre></div>
</div>
<h2 id="database">Database<a class="headerlink" href="#database" title="Permalink to this heading">¶</a></h2>
<p>The database config was created with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>alembic<span class="w"> </span>init<span class="w"> </span>--template<span class="w"> </span>generic<span class="w"> </span>./migrations
</code></pre></div>
</div>
<p>At this point we need to edit <code class="docutils literal notranslate"><span class="pre">migrations/env.py</span></code> so it could see our database models. This part:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># This line was added so we import our database</span>
<span class="kn">from</span> <span class="nn">app.db.base</span> <span class="kn">import</span> <span class="n">Base</span>  <span class="c1"># noqa</span>

<span class="n">target_metadata</span> <span class="o">=</span> <span class="n">Base</span><span class="o">.</span><span class="n">metadata</span>
</code></pre></div>
</div>
<p>At this point we can do a migration to create the initial (empty) tables.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>alembic<span class="w"> </span>revision<span class="w"> </span>--autogenerate<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Create intital tables&quot;</span>
</code></pre></div>
</div>
<p>And then to run the first set of migrations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>alembic<span class="w"> </span>upgrade<span class="w"> </span>head
</code></pre></div>
</div>
<p>At this point we can create our initial super flux user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_USER</span><span class="o">=</span>fluxuser
<span class="nb">export</span><span class="w"> </span><span class="nv">FLUX_TOKEN</span><span class="o">=</span><span class="m">12345</span>
</code></pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>app/db/init_db.py<span class="w"> </span>init
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="gp"># </span>python<span class="w"> </span>app/db/init_db.py<span class="w"> </span>init

<span class="go">INFO:__main__:Creating initial data</span>
<span class="go">INFO:__main__:User fluxuser has been created.</span>
<span class="go">INFO:__main__:Initial data created</span>
</code></pre></div>
</div>
<p>or add a user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>app/db/init_db.py<span class="w"> </span>add-user<span class="w"> </span>peenut<span class="w"> </span>peenut
</code></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">INFO:__main__:User peenut has been created.</span>
</code></pre></div>
</div>
<p>You can see how we run these commands in the <code class="docutils literal notranslate"><span class="pre">entrypoint.sh</span></code> for the container.
The database is always created fresh, and the flux user and token (superuser)
are always generated from the environment variables shown above.</p>
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¶</a></h2>
<p>The documentation is provided in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> folder of the repository,
and generally most content that you might want to add is under
<code class="docutils literal notranslate"><span class="pre">getting_started</span></code>. For ease of contribution, files that are likely to be
updated by contributors (e.g., mostly everything but the module generated files)
are written in markdown. If you need to use <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#table-of-contents">toctree</a> you should not use extra newlines or spaces (see index.md files for examples). The documentation is also provided in Markdown (instead of rst or restructured syntax)
to make contribution easier for the community.</p>
<p>Finally, we recommend you use the same development environment also to build and work on
documentation. The reason is because we import the app to derive docstrings,
and this will require having Flux.</p>
<p><strong>NOTE</strong> to build the documentation you will need an unauthenticated flux endpoint
running. E.g., in another terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux<span class="w"> </span>start<span class="w"> </span>uvicorn<span class="w"> </span>app.main:app<span class="w"> </span>--host<span class="o">=</span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="o">=</span><span class="m">5000</span>
</code></pre></div>
</div>
<h3 id="install-dependencies-and-build">Install Dependencies and Build<a class="headerlink" href="#install-dependencies-and-build" title="Permalink to this heading">¶</a></h3>
<p>The documentation is built using sphinx, and generally you can install
dependencies (done in devcontainer):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="go">cd docs</span>
<span class="go">pip install -r requirements.txt</span>

<span class="gp"># </span>Ensure<span class="w"> </span>auth<span class="w"> </span>is<span class="w"> </span>off
<span class="go">unset FLUX_REQUIRE_AUTH</span>

<span class="gp"># </span>And<span class="w"> </span>build<span class="w"> </span>the<span class="w"> </span>docs<span class="w"> </span>into<span class="w"> </span>_build/html
<span class="go">make html</span>
</code></pre></div>
</div>
<h3 id="preview-documentation">Preview Documentation<a class="headerlink" href="#preview-documentation" title="Permalink to this heading">¶</a></h3>
<p>After <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> you can enter into <code class="docutils literal notranslate"><span class="pre">_build/html</span></code> and start a local web
server to preview:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="gp">$ </span>python<span class="w"> </span>-m<span class="w"> </span>http.server<span class="w"> </span><span class="m">9999</span>
</code></pre></div>
</div>
<p>And open your browser to <code class="docutils literal notranslate"><span class="pre">localhost:9999</span></code></p>
<h3 id="run-tests">Run Tests<a class="headerlink" href="#run-tests" title="Permalink to this heading">¶</a></h3>
<p>To run tests, from within the devcontainers environment (or with a local install)
of Flux alongside the app) you can use flux start. You will need to run them as the
flux instance owner. E.g., if it’s flux:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>-u<span class="w"> </span>flux<span class="w"> </span>flux<span class="w"> </span>start<span class="w"> </span>pytest<span class="w"> </span>-xs<span class="w"> </span>tests/test_api.py
</code></pre></div>
</div>
<p>or if it’s just root / a single user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>flux<span class="w"> </span>start<span class="w"> </span>pytest<span class="w"> </span>-xs<span class="w"> </span>tests/test_api.py
</code></pre></div>
</div>
<h3 id="docstrings">Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this heading">¶</a></h3>
<p>To render our Python API into the docs, we keep an updated restructured
syntax in the <code class="docutils literal notranslate"><span class="pre">docs/source</span></code> folder that you can update on demand as
follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><code><span class="gp">$ </span>./apidoc.sh
</code></pre></div>
</div>
<p>This should only be required if you change any docstrings or add/remove
functions from oras-py source code.</p>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      Mar 10, 2024
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="user-guide.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: User Guide" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              User Guide
            </div>
          </div>
        </a>
      
      
        
        <a href="interface.html" class="md-footer__link md-footer__link--next" aria-label="Next: Interface" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Interface
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, Flux RESTful API Developers.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.1.2.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/flux-framework/flux-restful-api" target="_blank" rel="noopener" title="Flux RESTFul API on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="https://flux-framework.org/" target="_blank" rel="noopener" title="Flux Framework" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 2.05c5.05.5 9 4.77 9 9.95 0 1.45-.32 2.83-.88 4.07l-2.62-1.53c.32-.79.5-1.64.5-2.54 0-3.53-2.61-6.43-6-6.92V2.05M12 19c2.21 0 4.17-1 5.45-2.62l2.6 1.53A9.97 9.97 0 0 1 12 22C6.47 22 2 17.5 2 12a9.99 9.99 0 0 1 9-9.95v3.03C7.61 5.57 5 8.47 5 12a7 7 0 0 0 7 7m0-13a6 6 0 0 1 6 6c0 2.97-2.16 5.44-5 5.92v-3.09c1.17-.41 2-1.52 2-2.83a3 3 0 0 0-3-3l-.55.05-1.54-2.67C10.56 6.13 11.26 6 12 6m-6 6c0-1.86.85-3.5 2.18-4.62l1.54 2.67C9.27 10.57 9 11.26 9 12c0 1.31.83 2.42 2 2.83v3.09c-2.84-.48-5-2.95-5-5.92Z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.tabs", "toc.integrate", "navigation.sections", "navigation.instant", "header.autohide", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "toc.follow", "toc.sticky", "content.tabs.link", "announce.dismiss"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=9a299579"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
  </body>
</html>